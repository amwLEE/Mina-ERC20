(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3454:function(t,e,n){"use strict";var r,i;t.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(i=n.g.process)?void 0:i.env)?n.g.process:n(7663)},9208:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9178)}])},2730:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var r=n(5893),i=n(9854),a=n.n(i),o=n(7294);function c(t){let{children:e}=t,n=(0,o.useRef)(null),[i,c]=(0,o.useState)(null),[s,l]=(0,o.useState)([]);function u(t,e,n,r){this.h=t,this.s=e,this.l=n,this.a=r,this.dir=Math.random()>.5?-1:1,this.toString=function(){return"hsla("+this.h+", "+this.s+"%, "+this.l+"%, "+this.a+")"}}function h(t,e,r,i,a){this.x={c:t,min:0,max:n.current.width,dir:Math.random()>.5?-1:1},this.y={c:e,min:0,max:n.current.height,dir:Math.random()>.5?-1:1},this.w={c:r,min:2,max:n.current.width,dir:Math.random()>.5?-1:1},this.h={c:i,min:2,max:n.current.height,dir:Math.random()>.5?-1:1},this.color=a,this.direction=Math.random()>.1?-1:1,this.velocity=(100*Math.random()+100)*.01*this.direction}function d(){if(n.current){i.clearRect(0,0,n.current.width,n.current.height);for(let n=0;n<s.length;n++){var t,e;((t=s[n]).x.c<=t.x.min||t.x.c>=t.x.max)&&(t.x.dir*=-1),(t.y.c<=t.y.min||t.y.c>=t.y.max)&&(t.y.dir*=-1),(t.w.c<=t.w.min||t.w.c>=t.w.max)&&(t.w.dir*=-1),(t.h.c<=t.h.min||t.h.c>=t.h.max)&&(t.h.dir*=-1),(t.color.a<=0||t.color.a>=.75)&&(t.color.dir*=-1),t.x.c+=.005*t.x.dir,t.y.c+=.005*t.y.dir,t.w.c+=.005*t.w.dir,t.h.c+=.005*t.h.dir,e=s[n],i.restore(),i.fillStyle=e.color.toString(),i.fillRect(e.x.c,e.y.c,e.w.c,e.h.c)}}}return(0,o.useEffect)(()=>{if(n.current){let t=n.current,e=t.getContext("2d");c(e);let r=[new h(1,1,3,4,new u(252,70,67,.8)),new h(0,0,1,1,new u(0,0,98,1)),new h(0,3,2,2,new u(11,100,62,.8)),new h(4,0,4,3,new u(190,94,75,.8)),new h(3,1,1,2,new u(324,98,50,.1))];l(r)}},[]),(0,o.useEffect)(()=>{let t;if(i){let e=()=>{d(),t=window.requestAnimationFrame(e)};e()}return()=>{window.cancelAnimationFrame(t)}},[d,s,i]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:a().background,children:(0,r.jsx)("canvas",{className:a().backgroundGradients,width:"6",height:"6",ref:n})}),(0,r.jsx)("div",{className:a().container,children:e})]})}},9178:function(t,e,n){"use strict";n.a(t,async function(t,r){try{n.r(e),n.d(e,{default:function(){return d}});var i=n(5893),a=n(7294);n(3112);var o=n(871),c=n(6400),s=n(2730),l=n(9854),u=n.n(l),h=t([o,c]);function d(){let t,e,n;let[r,l]=(0,a.useState)({zkappWorkerClient:null,hasWallet:null,hasBeenSetup:!1,accountExists:!1,currentNum:null,publicKey:null,zkappPublicKey:null,creatingTransaction:!1}),[h,d]=(0,a.useState)(""),[p,f]=(0,a.useState)("");(0,a.useEffect)(()=>{async function t(t){return new Promise(e=>{setTimeout(()=>{e()},1e3*t)})}(async()=>{if(!r.hasBeenSetup){d("Loading web worker..."),console.log("Loading web worker...");let e=new o.Z;await t(5),d("Done loading web worker"),console.log("Done loading web worker"),await e.setActiveInstanceToBerkeley();let n=window.mina;if(null==n){l({...r,hasWallet:!1});return}let i=(await n.requestAccounts())[0],a=c.nh.fromBase58(i);console.log("Using key:".concat(a.toBase58())),d("Using key:".concat(a.toBase58())),d("Checking if fee payer account exists..."),console.log("Checking if fee payer account exists...");let s=await e.fetchAccount({publicKey:a}),u=null==s.error;await e.loadContract(),console.log("Compiling zkApp..."),d("Compiling zkApp..."),await e.compileContract(),console.log("zkApp compiled"),d("zkApp compiled...");let h=c.nh.fromBase58("B62qjshG3cddKthD6KjCzHZP4oJM2kGuC8qRHN3WZmKH5B74V9Uddwu");await e.initZkappInstance(h),console.log("Getting zkApp state..."),d("Getting zkApp state..."),await e.fetchAccount({publicKey:h});let p=await e.getNum();console.log("Current state in zkApp: ".concat(p.toString())),d(""),l({...r,zkappWorkerClient:e,hasWallet:!0,hasBeenSetup:!0,publicKey:a,zkappPublicKey:h,accountExists:u,currentNum:p})}})()},[]),(0,a.useEffect)(()=>{(async()=>{if(r.hasBeenSetup&&!r.accountExists){for(;;){d("Checking if fee payer account exists..."),console.log("Checking if fee payer account exists...");let t=await r.zkappWorkerClient.fetchAccount({publicKey:r.publicKey}),e=null==t.error;if(e)break;await new Promise(t=>setTimeout(t,5e3))}l({...r,accountExists:!0})}})()},[r.hasBeenSetup]);let m=async()=>{l({...r,creatingTransaction:!0}),d("Creating a transaction..."),console.log("Creating a transaction..."),await r.zkappWorkerClient.fetchAccount({publicKey:r.publicKey}),await r.zkappWorkerClient.createUpdateTransaction(),d("Creating proof..."),console.log("Creating proof..."),await r.zkappWorkerClient.proveUpdateTransaction(),console.log("Requesting send transaction..."),d("Requesting send transaction...");let t=await r.zkappWorkerClient.getTransactionJSON();d("Getting transaction JSON..."),console.log("Getting transaction JSON...");let{hash:e}=await window.mina.sendTransaction({transaction:t,feePayer:{fee:.1,memo:""}}),n="https://berkeley.minaexplorer.com/transaction/".concat(e);console.log("View transaction at ".concat(n)),f(n),d(n),l({...r,creatingTransaction:!1})},g=async()=>{console.log("Getting zkApp state..."),d("Getting zkApp state..."),await r.zkappWorkerClient.fetchAccount({publicKey:r.zkappPublicKey});let t=await r.zkappWorkerClient.getNum();l({...r,currentNum:t}),console.log("Current state in zkApp: ".concat(t.toString())),d("")};if(null!=r.hasWallet&&!r.hasWallet){let e=(0,i.jsx)("a",{href:"https://www.aurowallet.com/",target:"_blank",rel:"noreferrer",children:"Install Auro wallet here"});t=(0,i.jsxs)("div",{children:["Could not find a wallet. ",e]})}let w=p?(0,i.jsx)("a",{href:h,target:"_blank",rel:"noreferrer",children:"View transaction"}):h,k=(0,i.jsxs)("div",{className:u().start,style:{fontWeight:"bold",fontSize:"1.5rem",paddingBottom:"5rem"},children:[w,t]});if(r.hasBeenSetup&&!r.accountExists){let t="https://faucet.minaprotocol.com/?address="+r.publicKey.toBase58();e=(0,i.jsxs)("div",{children:["Account does not exist.",(0,i.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:"Visit the faucet to fund this fee payer account"})]})}return r.hasBeenSetup&&r.accountExists&&(n=(0,i.jsxs)("div",{style:{justifyContent:"center",alignItems:"center"},children:[(0,i.jsxs)("div",{className:u().center,style:{padding:0},children:["Current state in zkApp: ",r.currentNum.toString()," "]}),(0,i.jsx)("button",{className:u().card,onClick:m,disabled:r.creatingTransaction,children:"Send Transaction"}),(0,i.jsx)("button",{className:u().card,onClick:g,children:"Get Latest State"})]})),(0,i.jsx)(s.Z,{children:(0,i.jsx)("div",{className:u().main,style:{padding:0},children:(0,i.jsxs)("div",{className:u().center,style:{padding:0},children:[k,e,n]})})})}[o,c]=h.then?(await h)():h,r()}catch(t){r(t)}})},871:function(t,e,n){"use strict";n.a(t,async function(t,r){try{n.d(e,{Z:function(){return o}});var i=n(6400),a=t([i]);i=(a.then?(await a)():a)[0];class o{setActiveInstanceToBerkeley(){return this._call("setActiveInstanceToBerkeley",{})}loadContract(){return this._call("loadContract",{})}compileContract(){return this._call("compileContract",{})}fetchAccount(t){let{publicKey:e}=t,n=this._call("fetchAccount",{publicKey58:e.toBase58()});return n}initZkappInstance(t){return this._call("initZkappInstance",{publicKey58:t.toBase58()})}async getNum(){let t=await this._call("getNum",{});return i.gN.fromJSON(JSON.parse(t))}createUpdateTransaction(){return this._call("createUpdateTransaction",{})}proveUpdateTransaction(){return this._call("proveUpdateTransaction",{})}async getTransactionJSON(){let t=await this._call("getTransactionJSON",{});return t}_call(t,e){return new Promise((n,r)=>{this.promises[this.nextId]={resolve:n,reject:r};let i={id:this.nextId,fn:t,args:e};this.worker.postMessage(i),this.nextId++})}constructor(){this.worker=new Worker(n.tu(new URL(n.p+n.u(542),n.b))),this.promises={},this.nextId=0,this.worker.onmessage=t=>{this.promises[t.data.id].resolve(t.data.data),delete this.promises[t.data.id]}}}r()}catch(t){r(t)}})},9854:function(t){t.exports={main:"Home_main__2uIek",background:"Home_background__CTycG",backgroundGradients:"Home_backgroundGradients__VUGb4",container:"Home_container__9OuOz",tagline:"Home_tagline__Jw01K",start:"Home_start__ELciH",code:"Home_code__BZK8z",grid:"Home_grid__vo_ES",card:"Home_card__HIlp_",center:"Home_center__Y_rV4",logo:"Home_logo__ZEOng",content:"Home_content__Qnbja"}},7663:function(t){!function(){var e={229:function(t){var e,n,r,i=t.exports={};function a(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function c(t){if(e===setTimeout)return setTimeout(t,0);if((e===a||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:a}catch(t){e=a}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var s=[],l=!1,u=-1;function h(){l&&r&&(l=!1,r.length?s=r.concat(s):u=-1,s.length&&d())}function d(){if(!l){var t=c(h);l=!0;for(var e=s.length;e;){for(r=s,s=[];++u<e;)r&&r[u].run();u=-1,e=s.length}r=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function f(){}i.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new p(t,e)),1!==s.length||l||c(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.prependListener=f,i.prependOnceListener=f,i.listeners=function(t){return[]},i.binding=function(t){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var a=n[t]={exports:{}},o=!0;try{e[t](a,a.exports,r),o=!1}finally{o&&delete n[t]}return a.exports}r.ab="//";var i=r(229);t.exports=i}()}},function(t){t.O(0,[829,774,888,179],function(){return t(t.s=9208)}),_N_E=t.O()}]);